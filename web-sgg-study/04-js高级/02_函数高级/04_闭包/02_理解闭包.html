<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>02_理解闭包</title>
</head>
<body>
	<!-- 
	1. 什么是闭包? 
	  - 闭包是一个闭合的容器
	  - 可以认为闭包就是一个对象: {key: value}
	2. 闭包如何产生? 
	  - 当一个嵌套的内部函数引用了嵌套的外部函数的变量(函数)时, 就产生了闭包
	3. 产生的条件?
	  - 函数嵌套
	  - 内部函数引用了外部函数的数据(变量/函数)
	4. 闭包到底是什么?
	  - 断点调试查看 [[Scopes]]->Closure
	  - 闭包是嵌套的内部函数
	  - 包含被引用变量/函数的对象
	5. 闭包的作用
	  - 延长外部函数局部变量的生命周期
	  - 从外部访问函数内部的局部变量
	6. 闭包缺点
	  - 占内存
	  - 不及时清除闭包容易导致内存溢出
	7. 闭包使用场景
	  - 解决循环遍历加监听的问题
	  - 将内部的函数返出来
	  - 将函数作为实参传递给另一个函数调用
	 -->
	<script>
		/*
		全局window下, 预解析时, 不管函数是否调用, 只要定义了, 就会在全局执行上下文中被收集
		局部(函数)作用域下, 函数内部声明的函数, 只要未调用, 局部执行上下文中是不会收集内部函数
		*/
		console.log('11')
		function fun() {
			var num = 4;
			function fun2() {
				console.log(num);
			}
			fun2()
		}
		fun();

		function foo() {
			var fo = 'kk';
			return function() {
				console.log(fo)
			}
		}
		var foo2 = foo();  // 闭包永远跟随着内部函数, return时内部函数被返出来, 闭包也会跟着出来

		console.log('-----')
	</script>
</body>
</html>